<%- include('../partials/header') %>

<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1><i class="bi bi-printer"></i> Printspoint</h1>
      <p>Your Kenyan Print-on-Demand Platform</p>
    </div>
    
    <ul class="nav nav-pills nav-justified mb-4" id="authTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="pill" data-bs-target="#login" type="button">Login</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="signup-tab" data-bs-toggle="pill" data-bs-target="#signup" type="button">Sign Up</button>
      </li>
    </ul>
    
    <div class="tab-content" id="authTabContent">
      <!-- Login Tab -->
      <div class="tab-pane fade show active" id="login" role="tabpanel">
        <div class="d-grid gap-3">
          <button class="btn btn-outline-dark btn-lg" id="googleLoginBtn">
            <i class="bi bi-google me-2"></i>Continue with Google
          </button>
          
          <div class="divider">
            <span>or</span>
          </div>
          
          <div id="phoneLoginForm">
            <div class="mb-3">
              <label class="form-label">Phone Number</label>
              <div class="input-group">
                <span class="input-group-text">+254</span>
                <input type="tel" class="form-control" id="loginPhone" placeholder="7XXXXXXXX">
              </div>
            </div>
            <div id="loginRecaptcha"></div>
            <button class="btn btn-primary btn-lg w-100 mt-3" id="sendLoginOtp">
              <i class="bi bi-phone me-2"></i>Send OTP
            </button>
            <div id="loginOtpSection" class="mt-3" style="display: none;">
              <input type="text" class="form-control mb-3" id="loginOtp" placeholder="Enter 6-digit OTP">
              <button class="btn btn-success btn-lg w-100" id="verifyLoginOtp">Verify & Login</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Signup Tab -->
      <div class="tab-pane fade" id="signup" role="tabpanel">
        <div class="d-grid gap-3">
          <button class="btn btn-outline-dark btn-lg" id="googleSignupBtn">
            <i class="bi bi-google me-2"></i>Sign up with Google
          </button>
          
          <div class="divider">
            <span>or</span>
          </div>
          
          <div id="phoneSignupForm">
            <div class="mb-3">
              <label class="form-label">Phone Number</label>
              <div class="input-group">
                <span class="input-group-text">+254</span>
                <input type="tel" class="form-control" id="signupPhone" placeholder="7XXXXXXXX">
              </div>
            </div>
            <div id="signupRecaptcha"></div>
            <button class="btn btn-primary btn-lg w-100 mt-3" id="sendSignupOtp">
              <i class="bi bi-phone me-2"></i>Send OTP
            </button>
            <div id="signupOtpSection" class="mt-3" style="display: none;">
              <input type="text" class="form-control mb-3" id="signupOtp" placeholder="Enter 6-digit OTP">
              <button class="btn btn-success btn-lg w-100" id="verifySignupOtp">Verify & Sign Up</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div id="authError" class="alert alert-danger mt-3" style="display: none;"></div>
    <div id="authLoading" class="text-center mt-3" style="display: none;">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</div>

<script>
  window.FIREBASE_API_KEY = '<%= firebaseConfig.apiKey %>';
  window.FIREBASE_PROJECT_ID = '<%= firebaseConfig.projectId %>';
  window.FIREBASE_APP_ID = '<%= firebaseConfig.appId %>';
</script>
<script type="module" src="/js/auth.js"></script>
<%- include('../partials/footer') %>
